{% extends 'BWSkeletonBundle:Frontend:layout.html.twig' %}

{% block title_wrap -%}{{ entity.title ? entity.title : entity.heading }}{%- endblock %}

{% block description -%}{{ entity.metaDescription ? entity.metaDescription }}{%- endblock %}

{% block content_wrap -%}
    {{ bw_debug.template(_self.templateName, 'content_wrap') }}

    <div class="category {{ is_granted('ROLE_ADMIN') ? 'editable ' : '' }}{{ entity.class ? entity.class ~ ' ' : '' }}">
        {{ bw_controls.show(path('category_edit', {'id': entity.id})) }}
        <div class="">
            {% if entity.heading %}
                <h1>{{ entity.heading }}</h1>
            {% endif %}
            <div class="description">
                {{ entity.description|raw }}
            </div>
        </div>
    </div>

    {% if posts is defined %}
        <div class="posts">
            {% for post in posts %}
                <div class="post {{ is_granted('ROLE_ADMIN') ? 'editable ' : '' }}{{ entity.class ? entity.class ~ ' ' : '' }}">
                    {{ bw_controls.show(path('post_edit', {'id': post.id})) }}
                    <h2>
                        <a href="{{ app.request.getUriForPath(post.route.path) }}">
                            {{ post.heading }}
                        </a>
                    </h2>
                    <div class="short_description">
                        {{ post.shortDescription|raw }}
                    </div>
                    <div class="more">
                        <a class="btn btn-primary" href="{{ app.request.getUriForPath(post.route.path) }}">
                            Подробнее
                        </a>
                    </div>
                </div>
            {% endfor %}
        </div>
    {% endif %}

    {{ bw_debug.template(_self.templateName, 'content_wrap', '/') }}
{% endblock %}
